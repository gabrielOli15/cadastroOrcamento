import{a as h,c as b}from"./chunk-QMKMVDLS.js";import"./chunk-FF4B56LT.js";import{A as l,B as u,C as p,F as m,Fa as c,Ya as g,_a as f,na as d,w as n,x as a}from"./chunk-LGW2HRLS.js";var N=(()=>{class r{constructor(i,t,e,o){this.loginService=i,this.router=t,this.storage=e,this.poNotification=o,this.customLiterals={loginPlaceholder:"Insira seu usu\xE1rio",loginHint:"O seu usu\xE1rio \xE9 foi definido pelo administrador do Protheus"},this.language=[],this.hideRememberUser=!0}loginSubmit(i){let t=Object.assign({username:i.login,password:i.password});this.loginService.getLogin(i.login,i.password).subscribe(e=>{if(e.nome){if(e.bloqueado=="1"){let s={message:"usu\xE1rio bloqueado, contate o administrador.",orientation:void 0,action:void 0,actionLabel:"",duration:5e3};this.poNotification.error(s);return}let o=new Date;o.setDate(o.getDate()+1),this.storage.set("usuario",{nome:e.nome,perfil:e.perfil}),this.storage.set("loggedIn",o).then(()=>{this.router.navigate(["/"])})}else{let o={message:"usuario ou senha inv\xE1lidos, contate o administrador.",orientation:void 0,action:void 0,actionLabel:"",duration:5e3};this.poNotification.error(o)}})}static{this.\u0275fac=function(t){return new(t||r)(n(b),n(d),n(h),n(c))}}static{this.\u0275cmp=a({type:r,selectors:[["app-login"]],decls:1,vars:3,consts:[["p-product-name","Portal de or\xE7amentos Cardall","p-logo","../../assets/logocompleto.png",3,"p-login-submit","p-hide-remember-user","p-literals","p-languages"]],template:function(t,e){t&1&&(u(0,"po-page-login",0),m("p-login-submit",function(s){return e.loginSubmit(s)}),p()),t&2&&l("p-hide-remember-user",e.hideRememberUser)("p-literals",e.customLiterals)("p-languages",e.language)},dependencies:[f,g],encapsulation:2})}}return r})();export{N as LoginComponent};
