import{a as q}from"./chunk-FF4B56LT.js";import{A as c,B as p,C as d,Ca as O,D as b,E as D,F as k,Ga as T,Ha as R,J as y,K as h,L as g,Na as A,R as L,Xa as M,Y as V,_a as P,l as f,na as S,o as v,p as l,q as r,u,w as _,x as C}from"./chunk-63LJVA47.js";var E=(()=>{class s{constructor(e){this.http=e}downloadCsv(e){this.http.get(e).subscribe(o=>{let n="data:text/csv;charset=utf-8,"+this.parseJsonToCsv(o.items),a="data.csv",i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download",a),i.click()})}parseJsonToCsv(e=[]){if(!e.length)return"";let o=Object.keys(e[0]),t=",",n=`
`,a=o.join(t),i=e.reduce((m,U)=>(o.forEach(($,w)=>{w&&w<o.length-1&&(m+=t),m+=U[$]}),m+n),a+n);return encodeURIComponent(i)}static{this.\u0275fac=function(o){return new(o||s)(v(V))}}static{this.\u0275prov=f({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var Q=["userDetailModal"],j=["dependentsModal"],J=()=>({disclaimerGroupTitle:"Filtros aplicados:",filterTitle:"Filtro avan\xE7ado",filterCancelLabel:"Fechar",filterConfirmLabel:"Aplicar",quickSearchLabel:"Valor pesquisado:",searchPlaceholder:"Pesquise aqui"}),B=new q,X=(()=>{class s{constructor(e,o){this.listaOrcamentosService=e,this.router=o,this.serviceApi=B.URL+"/cardallapis/SA1",this.actionsRight=!1,this.quickSearchWidth=3,this.fixedFilter=!1,this.actions={new:"/orcamentos/cadastro-estrutura",remove:!0,removeAll:!0},this.breadcrumb={items:[{label:"Or\xE7amentos",action:()=>this.router.navigate(["/"])},{label:"Or\xE7amentos"}]},this.tableSpacing=T.Small,this.cityOptions=[{value:"S\xE3o Paulo",label:"S\xE3o Paulo"},{value:"Joinville",label:"Joinville"},{value:"S\xE3o Bento",label:"S\xE3o Bento"},{value:"Araquari",label:"Araquari"},{value:"Campinas",label:"Campinas"},{value:"Osasco",label:"Osasco"}],this.fields=[{property:"a1_cod",label:"codigo"},{property:"a1_nome",label:"cliente"},{property:"a1_maidupl",label:"valor"},{property:"a1_email",label:"e-mail"}],this.detailFields=[{property:"status",tag:!0,gridLgColumns:4,divider:"Personal Data"},{property:"name",gridLgColumns:4},{property:"nickname",label:"User name",gridLgColumns:4},{property:"email",gridLgColumns:4},{property:"birthdate",gridLgColumns:4,type:"date"},{property:"genre",gridLgColumns:4,gridSmColumns:6},{property:"cityName",label:"City",divider:"Address"},{property:"state"},{property:"country"}],this.pageCustomActions=[{label:"Print",action:this.printPage.bind(this),icon:"an an-printer"}],this.tableCustomActions=[{label:"Details",action:this.onClickUserDetail.bind(this),disabled:this.isUserInactive.bind(this),icon:"an an-user"},{label:"Dependents",action:this.onClickDependents.bind(this),visible:this.hasDependents.bind(this),icon:"an an-user"}]}ngOnInit(){this.pageCustomActions=[...this.pageCustomActions,{label:"Download .csv",action:this.listaOrcamentosService.downloadCsv.bind(this.listaOrcamentosService,this.serviceApi),icon:"an an-download-simple"}]}onLoad(){return{fields:[{property:"id",key:!0,visible:!0,filter:!0},{property:"name",label:"Name",filter:!0,gridColumns:6},{property:"genre",label:"Genre",filter:!0,gridColumns:6,duplicate:!0},{property:"search",initValue:"S\xE3o Paulo"},{property:"birthdate",label:"Birthdate",type:"date",gridColumns:6,visible:!1,allowColumnsManager:!0}]}}isUserInactive(e){return e.status==="inactive"}hasDependents(e){return e.dependents.length!==0}printPage(){window.print()}onClickUserDetail(e){this.detailedUser=e,this.userDetailModal.open()}onClickDependents(e){this.dependents=e.dependents,this.dependentsModal.open()}onEdit(e){console.log("onEdit")}onView(e){console.log("onView")}onDelete(e){console.log("onDelete")}onDuplicate(e){console.log("onDuplicate")}onSelect(e){console.log("onSelect")}onDeselect(e){console.log("onDeselect")}onLoadMore(e){console.log("onLoadMore")}onRowClick(e){console.log("onRowClick")}onRowDoubleClick(e){console.log("onRowDoubleClick")}onRowSelection(e){console.log("onRowSelection")}onRowDeselection(e){console.log("onRowDeselection")}static{this.\u0275fac=function(o){return new(o||s)(_(E),_(S))}}static{this.\u0275cmp=C({type:s,selectors:[["app-lista-orcamentos"]],viewQuery:function(o,t){if(o&1&&(y(Q,5),y(j,5)),o&2){let n;h(n=g())&&(t.userDetailModal=n.first),h(n=g())&&(t.dependentsModal=n.first)}},decls:8,vars:19,consts:[["dynamicTable",""],["userDetailModal",""],["dependentsModal",""],["p-title","Lista de Or\xE7amentos",3,"p-dynamic-table-edit","p-dynamic-table-view","p-dynamic-table-delete","p-dynamic-table-duplicate","p-dynamic-table-select","p-dynamic-table-deselect","p-dynamic-table-load-more","p-dynamic-table-row-click","p-dynamic-table-row-double-click","p-dynamic-table-row-selection","p-dynamic-table-row-deselection","p-auto-router","p-concat-filters","p-keep-filters","p-actions","p-actions-right","p-page-custom-actions","p-table-custom-actions","p-breadcrumb","p-fields","p-service-api","p-quick-search-width","p-height","p-literals","p-spacing"],["p-title","User Detail"],[3,"p-fields","p-value"],["p-title","Dependents"],[3,"p-items","p-hide-table-search"]],template:function(o,t){if(o&1){let n=D();p(0,"po-page-dynamic-table",3,0),k("p-dynamic-table-edit",function(i){return l(n),r(t.onEdit(i))})("p-dynamic-table-view",function(i){return l(n),r(t.onView(i))})("p-dynamic-table-delete",function(i){return l(n),r(t.onDelete(i))})("p-dynamic-table-duplicate",function(i){return l(n),r(t.onDuplicate(i))})("p-dynamic-table-select",function(i){return l(n),r(t.onSelect(i))})("p-dynamic-table-deselect",function(i){return l(n),r(t.onDeselect(i))})("p-dynamic-table-load-more",function(i){return l(n),r(t.onLoadMore(i))})("p-dynamic-table-row-click",function(i){return l(n),r(t.onRowClick(i))})("p-dynamic-table-row-double-click",function(i){return l(n),r(t.onRowDoubleClick(i))})("p-dynamic-table-row-selection",function(i){return l(n),r(t.onRowSelection(i))})("p-dynamic-table-row-deselection",function(i){return l(n),r(t.onRowDeselection(i))}),d(),p(2,"po-modal",4,1),b(4,"po-dynamic-view",5),d(),p(5,"po-modal",6,2),b(7,"po-table",7),d()}o&2&&(c("p-auto-router",!0)("p-concat-filters",!0)("p-keep-filters",!0)("p-actions",t.actions)("p-actions-right",t.actionsRight)("p-page-custom-actions",t.pageCustomActions)("p-table-custom-actions",t.tableCustomActions)("p-breadcrumb",t.breadcrumb)("p-fields",t.fields)("p-service-api",t.serviceApi)("p-quick-search-width",t.quickSearchWidth)("p-height",600)("p-literals",L(18,J))("p-spacing",t.tableSpacing),u(4),c("p-fields",t.detailFields)("p-value",t.detailedUser),u(3),c("p-items",t.dependents)("p-hide-table-search",!1))},dependencies:[P,A,O,R,M],encapsulation:2})}}return s})();export{X as ListaOrcamentosComponent};
