import{a as q}from"./chunk-FF4B56LT.js";import{A as p,B as c,C as d,Ca as S,D as b,E as D,F as P,Ga as z,Ha as T,J as y,K as h,L as f,Na as R,R as V,Xa as M,Y as k,_a as E,l as g,na as A,o as v,p as n,q as r,u as m,w as _,x as C}from"./chunk-63LJVA47.js";var F=(()=>{class s{constructor(e){this.http=e}downloadCsv(e){this.http.get(e).subscribe(a=>{let o="data:text/csv;charset=utf-8,"+this.parseJsonToCsv(a.items),l="data.csv",i=document.createElement("a");i.setAttribute("href",o),i.setAttribute("download",l),i.click()})}parseJsonToCsv(e=[]){if(!e.length)return"";let a=Object.keys(e[0]),t=",",o=`
`,l=a.join(t),i=e.reduce((u,$)=>(a.forEach((U,w)=>{w&&w<a.length-1&&(u+=t),u+=$[U]}),u+o),l+o);return encodeURIComponent(i)}static{this.\u0275fac=function(a){return new(a||s)(v(k))}}static{this.\u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var Q=["userDetailModal"],j=["dependentsModal"],G=()=>({disclaimerGroupTitle:"Filtros aplicados:",filterTitle:"Filtro avan\xE7ado",filterCancelLabel:"Fechar",filterConfirmLabel:"Aplicar",quickSearchLabel:"Valor pesquisado:",searchPlaceholder:"Pesquise aqui"}),O=new q,X=(()=>{class s{constructor(e,a){this.atualizacaoPrecosService=e,this.router=a,this.serviceApi=O.URL+"/cardallapis/SB1",this.actionsRight=!1,this.quickSearchWidth=3,this.fixedFilter=!1,this.actions={remove:!0,removeAll:!0},this.breadcrumb={items:[{label:"Or\xE7amentos",action:()=>this.router.navigate(["/"])},{label:"Pre\xE7os"}]},this.tableSpacing=z.Small,this.fields=[{property:"b1_grupo",label:"Grupo",key:!0,visible:!0,filter:!0},{property:"b1_cod",label:"Cod",key:!0,visible:!0,filter:!0},{property:"b1_desc",label:"Descri\xE7\xE3o",filter:!0},{property:"b1_custd",label:"Valor",filter:!0,gridColumns:6,duplicate:!0,sortable:!1}],this.detailFields=[{property:"b1_grupo",label:""},{property:"b1_cod",label:""},{property:"b1_desc",label:""},{property:"b1_tipo",label:""},{property:"b1_subgrup",label:""},{property:"b1_um",label:""},{property:"b1_locpad",label:""},{property:"b1_pesopad",label:""},{property:"b1_picm",label:""},{property:"b1_ipi",label:""},{property:"b1_posipi",label:""},{property:"b1_especie",label:""},{property:"b1_ex_ncm",label:""},{property:"b1_ex_nbm",label:""},{property:"b1_endcar",label:""},{property:"b1_aliqiss",label:""},{property:"b1_codiss",label:""},{property:"b1_te",label:""},{property:"b1_ts",label:""},{property:"b1_picmret",label:""},{property:"b1_picment",label:""}],this.pageCustomActions=[{label:"PDF",action:this.printPage.bind(this),icon:"an an-printer"}],this.tableCustomActions=[{label:"Detalhes",action:this.onClickUserDetail.bind(this),disabled:!1,icon:"an an-subtitles"},{label:"Corrigir valor",action:this.onClickUserDetail.bind(this),disabled:!1,icon:"an an-pencil-simple"}]}ngOnInit(){this.pageCustomActions=[...this.pageCustomActions,{label:"CSV",action:this.atualizacaoPrecosService.downloadCsv.bind(this.atualizacaoPrecosService,this.serviceApi),icon:"an an-download-simple"}]}onLoad(){return{fields:[{property:"id",key:!0,visible:!0,filter:!0},{property:"name",label:"Name",filter:!0,gridColumns:6},{property:"genre",label:"Genre",filter:!0,gridColumns:6,duplicate:!0},{property:"search",initValue:"S\xE3o Paulo"},{property:"birthdate",label:"Birthdate",type:"date",gridColumns:6,visible:!1,allowColumnsManager:!0}]}}isUserInactive(e){return e.status==="inactive"}hasDependents(e){return e.dependents.length!==0}printPage(){window.print()}onClickUserDetail(e){this.detailedUser=e,this.userDetailModal.open()}onClickDependents(e){this.dependents=e.dependents,this.dependentsModal.open()}onEdit(e){console.log("onEdit")}onView(e){console.log("onView")}onDelete(e){console.log("onDelete")}onDuplicate(e){console.log("onDuplicate")}onSelect(e){console.log("onSelect")}onDeselect(e){console.log("onDeselect")}onLoadMore(e){console.log("onLoadMore")}onRowClick(e){console.log("onRowClick")}onRowDoubleClick(e){console.log("onRowDoubleClick")}onRowSelection(e){console.log("onRowSelection")}onRowDeselection(e){console.log("onRowDeselection")}static{this.\u0275fac=function(a){return new(a||s)(_(F),_(A))}}static{this.\u0275cmp=C({type:s,selectors:[["app-atualizacao-precos"]],viewQuery:function(a,t){if(a&1&&(y(Q,5),y(j,5)),a&2){let o;h(o=f())&&(t.userDetailModal=o.first),h(o=f())&&(t.dependentsModal=o.first)}},decls:8,vars:19,consts:[["dynamicTable",""],["userDetailModal",""],["dependentsModal",""],["p-title","Atualiza\xE7\xE3o de Pre\xE7os",3,"p-dynamic-table-edit","p-dynamic-table-view","p-dynamic-table-delete","p-dynamic-table-duplicate","p-dynamic-table-select","p-dynamic-table-deselect","p-dynamic-table-load-more","p-dynamic-table-row-click","p-dynamic-table-row-double-click","p-dynamic-table-row-selection","p-dynamic-table-row-deselection","p-auto-router","p-concat-filters","p-keep-filters","p-actions","p-actions-right","p-page-custom-actions","p-table-custom-actions","p-breadcrumb","p-fields","p-service-api","p-quick-search-width","p-height","p-literals","p-spacing"],["p-title","User Detail"],[3,"p-fields","p-value"],["p-title","Dependents"],[3,"p-items","p-hide-table-search"]],template:function(a,t){if(a&1){let o=D();c(0,"po-page-dynamic-table",3,0),P("p-dynamic-table-edit",function(i){return n(o),r(t.onEdit(i))})("p-dynamic-table-view",function(i){return n(o),r(t.onView(i))})("p-dynamic-table-delete",function(i){return n(o),r(t.onDelete(i))})("p-dynamic-table-duplicate",function(i){return n(o),r(t.onDuplicate(i))})("p-dynamic-table-select",function(i){return n(o),r(t.onSelect(i))})("p-dynamic-table-deselect",function(i){return n(o),r(t.onDeselect(i))})("p-dynamic-table-load-more",function(i){return n(o),r(t.onLoadMore(i))})("p-dynamic-table-row-click",function(i){return n(o),r(t.onRowClick(i))})("p-dynamic-table-row-double-click",function(i){return n(o),r(t.onRowDoubleClick(i))})("p-dynamic-table-row-selection",function(i){return n(o),r(t.onRowSelection(i))})("p-dynamic-table-row-deselection",function(i){return n(o),r(t.onRowDeselection(i))}),d(),c(2,"po-modal",4,1),b(4,"po-dynamic-view",5),d(),c(5,"po-modal",6,2),b(7,"po-table",7),d()}a&2&&(p("p-auto-router",!0)("p-concat-filters",!0)("p-keep-filters",!0)("p-actions",t.actions)("p-actions-right",t.actionsRight)("p-page-custom-actions",t.pageCustomActions)("p-table-custom-actions",t.tableCustomActions)("p-breadcrumb",t.breadcrumb)("p-fields",t.fields)("p-service-api",t.serviceApi)("p-quick-search-width",t.quickSearchWidth)("p-height",600)("p-literals",V(18,G))("p-spacing",t.tableSpacing),m(4),p("p-fields",t.detailFields)("p-value",t.detailedUser),m(3),p("p-items",t.dependents)("p-hide-table-search",!1))},dependencies:[E,R,S,T,M],encapsulation:2})}}return s})();export{X as AtualizacaoPrecosComponent};
