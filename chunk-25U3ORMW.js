import{a as m}from"./chunk-FF4B56LT.js";import{A as p,B as u,C as d,Ca as A,D as _,E as S,F as E,Fa as R,Ga as T,Ha as L,J as y,K as v,L as f,Na as q,R as k,Xa as M,Y as O,_a as P,l as g,na as V,o as w,p as s,q as n,u as b,w as c,x as D}from"./chunk-LGW2HRLS.js";var X=new m,F=(()=>{class l{constructor(e){this.http=e,this.serviceApi=X.URL+"/cardallapis/estrutura"}downloadCsv(e){this.http.get(e).subscribe(i=>{let r="data:text/csv;charset=utf-8,"+this.parseJsonToCsv(i.items),o="data.csv",a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download",o),a.click()})}parseJsonToCsv(e=[]){if(!e.length)return"";let i=Object.keys(e[0]),t=",",r=`
`,o=i.join(t),a=e.reduce((h,I)=>(i.forEach((U,C)=>{C&&C<i.length-1&&(h+=t),h+=I[U]}),h+r),o+r);return encodeURIComponent(a)}static{this.\u0275fac=function(i){return new(i||l)(w(O))}}static{this.\u0275prov=g({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})();var j=["userDetailModal"],N=["dependentsModal"],Q=()=>({disclaimerGroupTitle:"Filtros aplicados:",filterTitle:"Filtro avan\xE7ado",filterCancelLabel:"Fechar",filterConfirmLabel:"Aplicar",quickSearchLabel:"Valor pesquisado:",searchPlaceholder:"Pesquise aqui"}),B=new m,ee=(()=>{class l{constructor(e,i,t){this.estruturaOrcamentoService=e,this.router=i,this.poNotification=t,this.serviceApi=B.URL+"/cardallapis/SB1",this.actionsRight=!1,this.quickSearchWidth=3,this.fixedFilter=!1,this.breadcrumb={items:[{label:"Or\xE7amentos",action:()=>this.router.navigate(["/"])},{label:"Estruturas"}]},this.tableSpacing=T.Small,this.cityOptions=[{value:"S\xE3o Paulo",label:"S\xE3o Paulo"},{value:"Joinville",label:"Joinville"},{value:"S\xE3o Bento",label:"S\xE3o Bento"},{value:"Araquari",label:"Araquari"},{value:"Campinas",label:"Campinas"},{value:"Osasco",label:"Osasco"}],this.fields=[{property:"ZX1_COD",label:"codigo"},{property:"ZX1_STAT",label:"status"},{property:"ZX1_DESC",label:"descricao"},{property:"ZX1_ESTRU",label:"estrutura"},{property:"ZX1_TIPO",label:"tipo"},{property:"ZX1_REV",label:"revisao"},{property:"ZX1_DATA",label:"data"},{property:"ZX1_USU",label:"usuario"},{property:"ZX1_PESO",label:"peso"},{property:"ZX1_HORAS",label:"horas"},{property:"ZX1_VALOR",label:"valor"}],this.detailFields=[{property:"status",tag:!0,gridLgColumns:4,divider:"Personal Data"},{property:"name",gridLgColumns:4},{property:"nickname",label:"User name",gridLgColumns:4},{property:"email",gridLgColumns:4},{property:"birthdate",gridLgColumns:4,type:"date"},{property:"genre",gridLgColumns:4,gridSmColumns:6},{property:"cityName",label:"City",divider:"Address"},{property:"state"},{property:"country"}],this.pageCustomActions=[{label:"Nova Estrutura",action:this.novaEstrutura.bind(this)},{label:"Alterar",action:this.handleEstrutura.bind(this,1),visible:this.validaSelecao.bind(this),selectable:!0},{label:"Excluir",action:this.handleEstrutura.bind(this,2),visible:this.validaSelecao.bind(this),selectable:!0},{label:"Bloquear",action:this.handleEstrutura.bind(this,3),visible:this.validaSelecao.bind(this),selectable:!0},{label:"Desbloquear",action:this.handleEstrutura.bind(this,4),visible:this.validaSelecao.bind(this),selectable:!0},{label:"Copiar",action:this.handleEstrutura.bind(this,5),visible:this.validaSelecao.bind(this),selectable:!0}],this.tableCustomActions=[{label:"Details",action:this.onClickUserDetail.bind(this),disabled:this.isUserInactive.bind(this),icon:"an an-user"},{label:"Dependents",action:this.onClickDependents.bind(this),visible:this.hasDependents.bind(this),icon:"an an-user"}],this.estruturas={items:[],hasNext:!1,remainingRecords:0},this.estruturasColumns=[],this.hideRemoveAllDisclaimer=!1,this.hideCloseDisclaimers=["city"],this.tipoEstrutura=!0,this.literals={filterConfirmLabel:"Aplicar",filterTitle:"Filtro avan\xE7ado",quickSearchLabel:"Valor pesquisado:"},this.jobDescriptionOptions=[],this.statusOptions=[],this.filters=[{property:"hireStatus",label:"Hire Status",options:this.statusOptions,gridColumns:6},{property:"name",gridColumns:6},{property:"city",gridColumns:6},{property:"job",label:"Job Description",options:this.jobDescriptionOptions,gridColumns:6}]}ngOnInit(){this.pageCustomActions=[...this.pageCustomActions,{label:"Download .csv",action:this.estruturaOrcamentoService.downloadCsv.bind(this.estruturaOrcamentoService,this.serviceApi),icon:"an an-download-simple"}]}onLoad(){return{fields:[{property:"id",key:!0,visible:!0,filter:!0},{property:"name",label:"Name",filter:!0,gridColumns:6},{property:"genre",label:"Genre",filter:!0,gridColumns:6,duplicate:!0},{property:"search",initValue:"S\xE3o Paulo"},{property:"birthdate",label:"Birthdate",type:"date",gridColumns:6,visible:!1,allowColumnsManager:!0}]}}isUserInactive(e){return e.status==="inactive"}hasDependents(e){return e.dependents.length!==0}printPage(){window.print()}onClickUserDetail(e){this.detailedUser=e,this.userDetailModal.open()}onClickDependents(e){this.dependents=e.dependents,this.dependentsModal.open()}onEdit(e){console.log("onEdit")}onView(e){console.log("onView")}onDelete(e){console.log("onDelete")}onDuplicate(e){console.log("onDuplicate")}onSelect(e){console.log("onSelect")}onDeselect(e){console.log("onDeselect")}onLoadMore(e){console.log("onLoadMore")}onRowClick(e){console.log("onRowClick")}onRowDoubleClick(e){console.log("onRowDoubleClick")}onRowSelection(e){console.log("onRowSelection")}onRowDeselection(e){console.log("onRowDeselection")}validaSelecao(){return!this.estruturas.items.find(function(e){return e.$selected})}handleEstrutura(e){let i="";switch(e){case 1:i="Altera\xE7\xE3o de estrutura";break;case 2:i="Exclus\xE3o de estrutura";break;case 3:i="Bloquear estrutura";break;case 4:i="Desbloquear estrutura";break;case 5:i="Copiar estrutura";break}let t={message:i,orientation:void 0,action:void 0,actionLabel:"",duration:1e3};this.poNotification.error(t)}onAdvancedSearch(e){e?this.searchItems(e):this.resetFilters()}onChangeDisclaimers(e){let i={};e.forEach(t=>{i[t.property]=t.value}),this.searchItems(i)}onQuickSearch(e){e?this.searchItems({name:e}):this.resetFilters()}novaEstrutura(){this.router.navigate(["/orcamentos/cadastro-estrutura"])}resetFilters(){}searchItems(e){}updateFilters(){this.filters[0].options=this.statusOptions,this.filters[3].options=this.jobDescriptionOptions}onClickRemoveAllDisclaimer(){this.hideRemoveAllDisclaimer=!this.hideRemoveAllDisclaimer}isVisibleRemoveAllDisclaimer(){return!this.hideRemoveAllDisclaimer}isHideRemoveAllDisclaimer(){return this.hideRemoveAllDisclaimer}onClickCloseCityDisclaimer(){this.hideCloseDisclaimers.length>0?this.hideCloseDisclaimers=[]:this.hideCloseDisclaimers=["city"]}isVisibleCloseCityDisclaimer(){return this.hideCloseDisclaimers.length<=0}isHideCloseCityDisclaimer(){return this.hideCloseDisclaimers.length>0}static{this.\u0275fac=function(i){return new(i||l)(c(F),c(V),c(R))}}static{this.\u0275cmp=D({type:l,selectors:[["app-estrutura-orcamento"]],viewQuery:function(i,t){if(i&1&&(y(j,5),y(N,5)),i&2){let r;v(r=f())&&(t.userDetailModal=r.first),v(r=f())&&(t.dependentsModal=r.first)}},decls:8,vars:17,consts:[["dynamicTable",""],["userDetailModal",""],["dependentsModal",""],["p-title","Estruturas de Or\xE7amentos",3,"p-dynamic-table-edit","p-dynamic-table-view","p-dynamic-table-delete","p-dynamic-table-duplicate","p-dynamic-table-select","p-dynamic-table-deselect","p-dynamic-table-load-more","p-dynamic-table-row-click","p-dynamic-table-row-double-click","p-dynamic-table-row-selection","p-dynamic-table-row-deselection","p-auto-router","p-concat-filters","p-keep-filters","p-actions-right","p-page-custom-actions","p-table-custom-actions","p-breadcrumb","p-fields","p-service-api","p-quick-search-width","p-height","p-literals"],["p-title","User Detail"],[3,"p-fields","p-value"],["p-title","Dependents"],[3,"p-items","p-hide-table-search"]],template:function(i,t){if(i&1){let r=S();u(0,"po-page-dynamic-table",3,0),E("p-dynamic-table-edit",function(a){return s(r),n(t.onEdit(a))})("p-dynamic-table-view",function(a){return s(r),n(t.onView(a))})("p-dynamic-table-delete",function(a){return s(r),n(t.onDelete(a))})("p-dynamic-table-duplicate",function(a){return s(r),n(t.onDuplicate(a))})("p-dynamic-table-select",function(a){return s(r),n(t.onSelect(a))})("p-dynamic-table-deselect",function(a){return s(r),n(t.onDeselect(a))})("p-dynamic-table-load-more",function(a){return s(r),n(t.onLoadMore(a))})("p-dynamic-table-row-click",function(a){return s(r),n(t.onRowClick(a))})("p-dynamic-table-row-double-click",function(a){return s(r),n(t.onRowDoubleClick(a))})("p-dynamic-table-row-selection",function(a){return s(r),n(t.onRowSelection(a))})("p-dynamic-table-row-deselection",function(a){return s(r),n(t.onRowDeselection(a))}),d(),u(2,"po-modal",4,1),_(4,"po-dynamic-view",5),d(),u(5,"po-modal",6,2),_(7,"po-table",7),d()}i&2&&(p("p-auto-router",!0)("p-concat-filters",!0)("p-keep-filters",!0)("p-actions-right",t.actionsRight)("p-page-custom-actions",t.pageCustomActions)("p-table-custom-actions",t.tableCustomActions)("p-breadcrumb",t.breadcrumb)("p-fields",t.fields)("p-service-api",t.serviceApi)("p-quick-search-width",t.quickSearchWidth)("p-height",600)("p-literals",k(16,Q)),b(4),p("p-fields",t.detailFields)("p-value",t.detailedUser),b(3),p("p-items",t.dependents)("p-hide-table-search",!1))},dependencies:[P,q,A,L,M],encapsulation:2})}}return l})();export{ee as EstruturaOrcamentoComponent};
